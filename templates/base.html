<!DOCTYPE html>
<html lang="en" x-data="{ darkMode: localStorage.getItem('darkMode') !== 'false' }"
      x-init="$watch('darkMode', val => localStorage.setItem('darkMode', val))"
      :class="{ 'dark': darkMode }" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    
    <!-- SEO Meta Tags -->
    <title>{% block title %}Adrian Molhany - Data Science Portfolio{% endblock %}</title>
    <meta name="description" content="{% block meta_description %}Adrian Molhany (Adrian Mahanyamba) - Data Science & Informatics Student. Professional portfolio showcasing data science projects, machine learning, and analytics expertise.{% endblock %}">
    <meta name="keywords" content="{% block meta_keywords %}Adrian Molhany, Adrian Mahanyamba, data science, machine learning, python, portfolio, analytics, data scientist, informatics{% endblock %}">
    <meta name="author" content="{% block meta_author %}Adrian Molhany{% endblock %}"
    
    <!-- Open Graph Meta Tags -->
    <meta property="og:title" content="{% block og_title %}Adrian Molhany - Data Science Portfolio{% endblock %}">
    <meta property="og:description" content="{% block og_description %}Adrian Molhany (Adrian Mahanyamba) - Professional Data Science Portfolio{% endblock %}">
    <meta property="og:type" content="website">
    <meta property="og:url" content="{% block og_url %}{{ request.build_absolute_uri }}{% endblock %}">
    <meta property="og:image" content="{% block og_image %}{% load static %}{% static 'images/og-image.jpg' %}{% endblock %}">

    <!-- Twitter Card Meta Tags -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="{% block twitter_title %}Adrian Molhany - Data Science Portfolio{% endblock %}"
    <meta name="twitter:description" content="{% block twitter_description %}Advanced Data Science & Informatics Portfolio{% endblock %}">
    <meta name="twitter:image" content="{% block twitter_image %}{% load static %}{% static 'images/twitter-card.jpg' %}{% endblock %}">
    
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="{% load static %}{% static 'images/favicon.ico' %}">
    <link rel="apple-touch-icon" sizes="180x180" href="{% load static %}{% static 'images/apple-touch-icon.png' %}">
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=JetBrains+Mono:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- CSS Framework - Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    fontFamily: {
                        'sans': ['Inter', 'system-ui', 'sans-serif'],
                        'mono': ['JetBrains Mono', 'monospace'],
                    },
                    colors: {
                        'primary': {
                            50: '#eff6ff',
                            500: '#3b82f6',
                            600: '#2563eb',
                            700: '#1d4ed8',
                            900: '#1e3a8a',
                        },
                        'accent': {
                            500: '#8b5cf6',
                            600: '#7c3aed',
                        },
                        'dark': {
                            800: '#1f2937',
                            900: '#111827',
                        }
                    },
                    animation: {
                        'float': 'float 6s ease-in-out infinite',
                        'glow': 'glow 2s ease-in-out infinite alternate',
                        'slide-up': 'slideUp 0.5s ease-out',
                        'fade-in': 'fadeIn 0.6s ease-out',
                    },
                    keyframes: {
                        float: {
                            '0%, 100%': { transform: 'translateY(0px)' },
                            '50%': { transform: 'translateY(-20px)' },
                        },
                        glow: {
                            '0%': { boxShadow: '0 0 5px #3b82f6, 0 0 10px #3b82f6, 0 0 15px #3b82f6' },
                            '100%': { boxShadow: '0 0 10px #3b82f6, 0 0 20px #3b82f6, 0 0 30px #3b82f6' },
                        },
                        slideUp: {
                            '0%': { transform: 'translateY(100px)', opacity: '0' },
                            '100%': { transform: 'translateY(0)', opacity: '1' },
                        },
                        fadeIn: {
                            '0%': { opacity: '0' },
                            '100%': { opacity: '1' },
                        }
                    },
                    backdropBlur: {
                        xs: '2px',
                    }
                }
            }
        }
    </script>
    
    <!-- Alpine.js for interactivity -->
    <script defer src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"></script>
    
    <!-- Chart.js for data visualizations -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns/dist/chartjs-adapter-date-fns.bundle.min.js"></script>
    
    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- AOS (Animate On Scroll) -->
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    
    <!-- Custom CSS -->
    {% load static %}
    <link rel="stylesheet" href="{% static 'css/custom.css' %}">
    
    {% block extra_css %}{% endblock %}
</head>
<body class="bg-white dark:bg-dark-900 text-gray-900 dark:text-white transition-colors duration-300 font-sans">
    
    <!-- Navigation -->
    {% include 'components/navigation.html' %}
    
    <!-- Main Content -->
    <main class="min-h-screen">
        {% block content %}{% endblock %}
    </main>
    
    <!-- Footer -->
    {% include 'components/footer.html' %}

    <!-- Live Chat Widget -->
    {% include 'components/live_chat.html' %}
    
    <!-- Scroll to Top Button -->
    <button x-data="{ show: false }" 
            x-show="show" 
            x-transition
            @scroll.window="show = window.pageYOffset > 500"
            @click="window.scrollTo({ top: 0, behavior: 'smooth' })"
            class="fixed bottom-8 right-8 bg-primary-600 hover:bg-primary-700 text-white p-3 rounded-full shadow-lg transition-all duration-300 z-50">
        <i class="fas fa-arrow-up"></i>
    </button>
    
    <!-- Loading Overlay -->
    <div x-data="{ loading: false }" 
         x-show="loading" 
         x-transition
         class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
        <div class="bg-white dark:bg-dark-800 p-8 rounded-lg shadow-xl">
            <div class="animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto"></div>
            <p class="mt-4 text-center">Loading...</p>
        </div>
    </div>
    
    <!-- Custom JavaScript -->
    <script>
        // Initialize AOS
        AOS.init({
            duration: 800,
            easing: 'ease-in-out',
            once: true,
            offset: 100
        });
        
        // Theme toggle functionality
        function toggleTheme() {
            const html = document.documentElement;
            const isDark = html.classList.contains('dark');

            if (isDark) {
                html.classList.remove('dark');
                localStorage.setItem('darkMode', 'false');
            } else {
                html.classList.add('dark');
                localStorage.setItem('darkMode', 'true');
            }

            // Update Alpine.js data
            if (window.Alpine) {
                window.Alpine.store('darkMode', !isDark);
            }
        }
        
        // Smooth scrolling for anchor links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });
        
        // Analytics tracking
        function trackEvent(eventName, eventData = {}) {
            // Add your analytics tracking code here
            console.log('Event tracked:', eventName, eventData);
        }
        
        // Page view tracking
        trackEvent('page_view', {
            page: window.location.pathname,
            title: document.title
        });

        // Initialize theme on page load - Default to dark mode
        document.addEventListener('DOMContentLoaded', function() {
            const darkMode = localStorage.getItem('darkMode');
            // Default to dark mode if no preference is set
            if (darkMode === null || darkMode === 'true') {
                document.documentElement.classList.add('dark');
                localStorage.setItem('darkMode', 'true');
            } else if (darkMode === 'false') {
                document.documentElement.classList.remove('dark');
            }

            // Initialize global button enhancements
            initializeButtonEnhancements();
        });

        // Global button enhancement function
        function initializeButtonEnhancements() {
            // Enhanced button responsiveness
            const buttons = document.querySelectorAll('button, .btn, .cyber-button, .glass-dark, a[role="button"]');

            buttons.forEach(button => {
                // Skip if already enhanced
                if (button.hasAttribute('data-enhanced')) return;
                button.setAttribute('data-enhanced', 'true');

                // Prevent double-click issues
                let isProcessing = false;

                // Add click enhancement
                button.addEventListener('click', function(e) {
                    if (isProcessing && !this.hasAttribute('data-allow-multiple')) {
                        e.preventDefault();
                        return false;
                    }

                    isProcessing = true;

                    // Add visual feedback
                    this.style.transform = 'scale(0.98)';
                    this.style.transition = 'transform 0.1s ease';

                    // Reset after animation
                    setTimeout(() => {
                        this.style.transform = '';
                        isProcessing = false;
                    }, 150);
                });

                // Add focus styles for accessibility
                button.addEventListener('focus', function() {
                    if (!this.hasAttribute('data-no-focus')) {
                        this.style.outline = '2px solid #3B82F6';
                        this.style.outlineOffset = '2px';
                    }
                });

                button.addEventListener('blur', function() {
                    this.style.outline = '';
                    this.style.outlineOffset = '';
                });
            });

            // Enhanced form inputs
            const inputs = document.querySelectorAll('input, textarea, select');
            inputs.forEach(input => {
                if (input.hasAttribute('data-enhanced')) return;
                input.setAttribute('data-enhanced', 'true');

                input.addEventListener('focus', function() {
                    this.style.borderColor = '#3B82F6';
                    this.style.boxShadow = '0 0 0 3px rgba(59, 130, 246, 0.1)';
                    this.style.transition = 'border-color 0.2s ease, box-shadow 0.2s ease';
                });

                input.addEventListener('blur', function() {
                    this.style.borderColor = '';
                    this.style.boxShadow = '';
                });
            });
        }

        // Re-initialize enhancements when new content is loaded
        function reinitializeEnhancements() {
            initializeButtonEnhancements();
        }
    </script>
    
    {% block extra_js %}{% endblock %}
</body>
</html>
